{% extends "base.html" %}
{% load static %}
{% block title %}CLIENTE{% endblock %}
{% block body %}
<!--**********************************
            Content body start
        ***********************************-->
{% block head %}CATALOGO{% endblock %}
<div class="content-body">
    <div class="container-fluid">
        <div class="row" style="padding-right: 0 !important;">
            <div class="col-sm-12 col-xl-12 col-xxl-12" style="padding-right: 0 !important;">
                <div class="card">

                    <div class="card-header d-block d-sm-flex border-0">
                        <div class="me-3">

                            <h4 class="card-title mb-2">
                                <a href="{% url 'catalogo:T_Tolva'%}">
                                    <i class="bi bi-arrow-left-circle text-black fs-28"></i>
                                </a>
                                <b>FORMULARIO TOLVA</b>
                            </h4>
                        </div>
                    </div>
                    <div class="card-body tab-content px-4">
                        <div class="tab-pane active show fade" id="monthly" role="tabpanel">
                            <form action="{% url 'catalogo:G_Tolva'%}" method="POST" autocomplete="off">{% csrf_token %}
                                <div class="form-group">
                                    {% if clave is not None %}
                                    <input type="hidden" class=" form-control mb-3" name="clave" value="{{ clave }}">
                                    {% else %}
                                    <input type="hidden" class=" form-control mb-3" name="clave"
                                        value="{{ ultimo_folio }}">
                                    {% endif %}
                                    <input type="hidden" class="form-control" name="tecnico"
                                        value="{{ user.first_name }} {{user.last_name}}">
                                    <div class="row">
                                        <div class="col-sm-12 col-md-12 col-lg-4 col-xl-4 mb-3">
                                            <h6 class="h6-form">ALIAS *</h6>
                                            {% if errorCol is not None %}
                                            <input type="text" autofocus name="alias" class=" form-control is-invalid"
                                                placeholder="Ingrese el nombre destino" required>
                                            <div class="invalid-feedback  mb-3">
                                                El alias de la tolva ya se registro anteriormente
                                            </div>
                                            {% else %}
                                            <input type="text" autofocus name="alias" class="form-control input"
                                                placeholder="Ingrese el nombre destino" required>
                                            {% endif %}
                                        </div>
                                        <div class="col-sm-12 col-md-12 col-lg-6 col-xl-4 mb-3">
                                            <h6 class="h6-form">CAPACIDAD *</h6>
                                            <input type="number" autofocus name="capacidad" class="form-control input"
                                                placeholder="Ingrese la capacidad en KG" step="0.01" required>
                                        </div>
                                        <div class="col-sm-12 col-md-12 col-lg-4 col-xl-4 mb-3">
                                            <h6 class="h6-form">UNIDAD MEDIDA *</h6>
                                            <select class="select2 form-control col-12" name="unidad" required>
                                                {% for UnidadMedida in FUnidadMedida %}
                                                <option value="{{ UnidadMedida.ID }}">{{ UnidadMedida.Descripcion }}
                                                </option>
                                                {% endfor %}
                                            </select>
                                        </div>
                                    </div>

                                    <div class="row" style="display: none;">
                                        <div class="col-sm-12 col-md-12 col-lg-6 col-xl-6 mb-3">
                                            <h6 class="h6-form">MARCA *</h6>
                                            <input type="text" autofocus name="marca" class="form-control input"
                                                placeholder="Ingrese la marca" value="S/D">

                                        </div> 
                                        <div class="col-sm-12 col-md-12 col-lg-6 col-xl-4 mb-3">
                                            <h6 class="h6-form">MODELO *</h6>
                                            <input type="text" autofocus name="modelo" class="form-control input"
                                                placeholder="Ingrese el modelo" value="S/D">

                                        </div>

                                    </div>

                                    <input type="hidden" value="6" name="estatus">
                                    <input type="hidden" value="1" name="producto">
                                    <div class="form-group my-4">
                                        <button type="submit" class="btn btn-primary agregarBoton"
                                            name="agregar">Guardar y
                                            agregar otro</button>
                                        <button type="submit" class="btn btn-success salirBoton" name="salir">Guardar y
                                            salir</button>
                                        <a href="{% url 'catalogo:F_Tolva'%}">
                                            <button type="button" class="btn btn-danger cancelarBoton">Cancelar</button>
                                        </a>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script>
    function checkInputValidity(input, errorMessageId, agregarBotonId, salirBotonId) {
        const agregarBoton = document.getElementById(agregarBotonId);
        const salirBoton = document.getElementById(salirBotonId);

        if (input.value.includes('.')) {
            input.classList.add('is-invalid');
            document.getElementById(errorMessageId).style.display = 'block';
            agregarBoton.disabled = true;
            salirBoton.disabled = true;
        } else {
            input.classList.remove('is-invalid');
            document.getElementById(errorMessageId).style.display = 'none';
            agregarBoton.disabled = false;
            salirBoton.disabled = false;
        }
    }
</script>

{% endblock %}